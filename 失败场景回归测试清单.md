# 失败场景回归测试清单（当前实现对齐）

> 文档版本：v1.1.0  
> 最后更新：2026-02-10

## 1. 解析链路
### 1.1 抖音分享文案
- [ ] 粘贴整段抖音分享文案可提取真实链接。
- [ ] 文案含多段无关文本时，仍可命中链接。
- [ ] 解析结果可展示基础格式信息。

### 1.2 X 普通视频
- [ ] Cookie 有效时可解析。
- [ ] Cookie 失效时有明确提示，不进入空白状态。
- [ ] 开启代理后网络波动时可重试，错误提示可读。

### 1.3 X m3u8/直播回放
- [ ] 解析结果识别为分片流。
- [ ] 可获取分辨率/码率时，推荐项置顶并带“推荐”标识。
- [ ] 无质量信息时，不做推荐排序。
- [ ] 无质量信息的分片流项显示“预览”按钮。

## 2. 推荐排序规则
- [ ] 仅 1 个选项：不排序、不推荐。
- [ ] 多个选项 + 可判断质量信息：推荐置顶。
- [ ] 多个选项 + 无可判断信息：保持原始顺序。

## 3. 下载链路
- [ ] 可下载项可正常入队。
- [ ] 失败任务可重试。
- [ ] 失败进度显示为失败前最后进度，不强制归零。
- [ ] 异常文件（空文件/文本内容）自动删除并归为失败。

## 4. 文件名与落盘
- [ ] 同标题重复下载不覆盖，自动生成 `(1)(2)...`。
- [ ] 下载完成文件可被系统媒体库识别。
- [ ] “已完成”只展示有效可播放结果。

## 5. 历史管理
- [ ] 解析记录/下载队列同卡片切换正常。
- [ ] 长按单项可进入管理模式并自动选中。
- [ ] 管理模式支持全选/取消全选。
- [ ] 点击整行可选中，不依赖仅点复选框。

## 6. 建议执行组合
- 抖音：3 条（短链/长链/混杂文案）
- X 普通视频：2 条（Cookie 有效/失效）
- X m3u8：2 条（有质量信息/无质量信息）

## 变更记录
- 2026-02-10 16:39 v1.0.0：按当时实现重排回归项，补充大小显示与错误文件治理校验点
- 2026-02-10 22:40 v1.1.0：新增推荐触发条件、m3u8 预览、同名重命名回归项
